# 功能特性

## 当前功能 (v1.0)

### 1. 视频上传和选择
- ✅ 从设备相册选择视频
- ✅ 支持所有常见视频格式
- ✅ 权限管理（相机、存储）

### 2. 智能姿态检测
- ✅ 使用Google ML Kit Pose Detection
- ✅ 高精度模式（Accurate Pose Detector）
- ✅ 识别关键身体部位：
  - 肩膀（左右）
  - 肘部（左右）
  - 手腕（左右）
  - 髋部（左右）

### 3. 俯卧撑计数算法
- ✅ 基于肘部角度的智能计数
- ✅ 双臂角度平均值计算
- ✅ 动作状态识别：
  - 向上位置（手臂伸直）
  - 向下位置（手臂弯曲）
  - 过渡状态
- ✅ 避免重复计数
- ✅ 阈值设置：
  - 向下阈值：90度
  - 向上阈值：160度

### 4. 姿态规范检测
- ✅ 身体对齐检测
- ✅ 姿势反馈提示
- ✅ 实时角度显示

### 5. 视频播放
- ✅ 使用ExoPlayer高性能播放
- ✅ 播放控制（暂停、继续、进度条）
- ✅ 播放状态监控

### 6. 用户界面
- ✅ Material Design风格
- ✅ 简洁直观的操作界面
- ✅ 实时计数显示
- ✅ 动作状态提示
- ✅ 进度指示器

## 技术实现

### 核心算法

#### 1. 角度计算
```
使用三点（肩-肘-腕）计算肘部弯曲角度
angle = atan2(wrist.y - elbow.y, wrist.x - elbow.x) - 
        atan2(shoulder.y - elbow.y, shoulder.x - elbow.x)
```

#### 2. 计数逻辑
```
如果 angle < 90° 且之前是向上状态:
    状态 = 向下
如果 angle > 160° 且之前是向下状态:
    计数 += 1
    状态 = 向上
```

#### 3. 姿态对齐检测
```
检查左右肩膀到髋部的角度差异
如果角度差 > 30°:
    提示姿势需要改进
```

### 性能优化
- 视频帧采样：每100ms处理一帧（可调整）
- 异步处理：使用Kotlin协程避免UI阻塞
- 内存管理：及时回收Bitmap资源

## 计划功能

### 短期计划（下一个版本）

#### 实时摄像头模式
- [ ] 使用CameraX实时拍摄
- [ ] 实时姿态检测和计数
- [ ] 视频录制功能
- [ ] 直接保存到相册

#### 历史记录
- [ ] 保存训练记录
- [ ] 显示历史统计
- [ ] 进度图表
- [ ] 个人记录追踪

#### 用户体验改善
- [ ] 引导教程
- [ ] 示例视频
- [ ] 错误提示优化
- [ ] 多语言支持（英文）

### 中期计划

#### 多运动支持
- [ ] 仰卧起坐检测
- [ ] 深蹲检测
- [ ] 平板支撑计时
- [ ] 引体向上检测

#### 训练计划
- [ ] 预设训练计划
- [ ] 自定义训练计划
- [ ] 训练提醒
- [ ] 目标设置

#### 社交功能
- [ ] 分享到社交媒体
- [ ] 排行榜
- [ ] 好友挑战
- [ ] 成就系统

### 长期计划

#### AI增强
- [ ] 动作质量评分
- [ ] 个性化建议
- [ ] 受伤风险预警
- [ ] 训练效果预测

#### 穿戴设备集成
- [ ] 智能手表支持
- [ ] 心率监测
- [ ] 卡路里计算
- [ ] 健康数据同步

#### 云服务
- [ ] 云端备份
- [ ] 多设备同步
- [ ] 在线教练指导
- [ ] 社区功能

## 技术栈演进

### 当前技术栈
- Kotlin
- Android SDK 34
- Google ML Kit
- ExoPlayer (Media3)
- CameraX
- Material Design Components
- Kotlin Coroutines

### 计划引入
- Room Database（本地存储）
- Jetpack Compose（UI现代化）
- Retrofit（网络请求）
- Firebase（云服务）
- TensorFlow Lite（自定义模型）

## 性能指标

### 当前性能
- 视频处理速度：约10fps（取决于设备性能）
- 姿态检测延迟：<100ms
- 计数准确率：约85-90%（标准动作）
- 内存占用：<200MB

### 优化目标
- 视频处理速度：>15fps
- 姿态检测延迟：<50ms
- 计数准确率：>95%
- 内存占用：<150MB
